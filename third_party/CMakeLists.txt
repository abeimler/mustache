cmake_minimum_required(VERSION 3.10)
project("")
set(CMAKE_CXX_STANDARD 17)

add_library(mustache_profiler INTERFACE)

if (BUILD_WITH_EASY_PROFILER)
    target_compile_definitions(mustache_profiler INTERFACE -DBUILD_WITH_EASY_PROFILER=1)
    add_subdirectory(easy_profiler)
    set(EASY_PROFILER_NO_GUI ON CACHE BOOL "")
    set(EASY_PROFILER_NO_SAMPLES ON CACHE BOOL "")
    target_link_libraries(mustache_profiler INTERFACE easy_profiler)
#    target_include_directories(mustache_profiler SYSTEM PUBLIC easy_profiler/easy_profiler_core/include)
else()
    target_compile_definitions(mustache_profiler INTERFACE -DBUILD_WITH_EASY_PROFILER=0)
endif(BUILD_WITH_EASY_PROFILER)

if (BUILD_WITH_OPTICK)
    target_compile_definitions(mustache_profiler INTERFACE -DBUILD_WITH_OPTICK=1)
    add_subdirectory(optick)
    target_link_libraries(mustache_profiler INTERFACE OptickCore)
#    target_include_directories(mustache_profiler SYSTEM INTERFACE optick/src)
else()
    target_compile_definitions(mustache_profiler INTERFACE -DBUILD_WITH_OPTICK=0)
endif(BUILD_WITH_OPTICK)
